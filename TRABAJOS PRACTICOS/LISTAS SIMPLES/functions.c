#include "functions.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void loadData(persona data)
{
    printf("Ingrese un nombre: \n");
    fflush(stdin);
    gets(data.nombre);

    printf("Ingrese la edad: \n");
    scanf("%d", &data.edad);
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void loadFile(char fileName[20])
{
    FILE * buffer = fopen(fileName, "ab");

    persona data;
    char control = 's';

    if(buffer)
    {
        while(control == 'S' || control == 's')
        {

            //loadData(data);

            printf("Ingrese un nombre: \n");
            fflush(stdin);
            gets(data.nombre);

            printf("Ingrese la edad: \n");
            scanf("%d", &data.edad);

            fwrite(&data, sizeof(persona), 1, buffer);

            printf("Desea continuar cargando datos? (s | n) \n");
            fflush(stdin);
            scanf("%c", &control);
        }

        fclose(buffer);
    }
    else
    {
        puts("ERROR ------------------------- NO SE PUDO ABRIR EL ARCHIVO! \n\n");
    }
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void printData(persona data)
{
    printf("Nombre: \n");
    printf("%s \n\n", data.nombre);

    printf("Edad: \n");
    printf("%d \n\n", data.edad);
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void getDataFile(char fileName[20])
{
    FILE * buffer = fopen(fileName, "rb");

    persona data;

    if(buffer)
    {
        while(fread(&data, sizeof(persona), 1, buffer) > 0)
        {
            printData(data);
        }

        fclose(buffer);
    }
    else
    {
        puts("ERR0R ------------------- NO SE PUDO ABRIR EL ARCHIVO. \n\n");
    }
}
//////////////////////////////////////////////////FIRST POINT/////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////FIRST POINT///////////////////////////////////////////////////////////////////////
nodo * fileToList(char fileName[20], nodo * list)
{
    FILE * buffer = fopen(fileName, "rb");
    persona data;

    if(buffer)
    {
        while(fread(&data, sizeof(persona), 1, buffer) > 0)
        {
            list = agregarEnOrden(list, crearNodo(data));
        }
        fclose(buffer);
    }
    else
    {
        puts("ERROR ----------------------- NO SE PUDO ABRIR EL ARCHIVO. \n");
    }

    return list;
}

////////////////////////////////////////////////////////////SECOND POINT////////////////////////////////////////////////////
////////////////////////////////////////////////////////////SECOND POINT////////////////////////////////////////////////////////////
int elementInList(nodo * list, char element[50])
{
    int data = 0;
    nodo * Nodo;

    if(list != NULL)
    {
       Nodo = buscarNodo(list, element);

       if(Nodo != NULL)
       {
           data = 1;
       }
       else
       {
           data = 0;
       }
    }
    else
    {
        data = 0;
    }
    return data;
}

///////////////////////////////////////////////////////////////////////////THIRD POINT/////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////THIRD POINT////////////////////////////////////////////////////////////////////////////////

nodo * createANewList(nodo * firstList, nodo * secondList, nodo * thirdList)
{
    nodo * aux;

    if(firstList != NULL && secondList != NULL)
    {
        while(firstList->siguiente != NULL && secondList->siguiente != NULL)
        {
            if(firstList->dato.edad < secondList->dato.edad)
            {
                aux = firstList;
                firstList = firstList->siguiente;
            }
            else
            {
                aux = secondList;
                secondList = secondList->siguiente;
            }

            aux->siguiente = NULL;
            thirdList = agregarAlFinal(thirdList, aux);
        }

        if(firstList != NULL)
        {
            thirdList = agregarAlFinal(thirdList, firstList);
        }
        else if(secondList != NULL)
        {
            thirdList = agregarAlFinal(thirdList, secondList);
        }
    }
    else
    {
        puts("LAS LISTAS NO TIENEN DATOS.");
    }

    return thirdList;
}
///////////////////////////////////////////////////////////////////////TDA OF STACK///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////TDA OF STACK/////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////SIXTH POINT////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////SIXTH POINT////////////////////////////////////////////////////////////////////////////

nodo * investTheList(nodo * list)
{
    nodo * investedList = inicLista(investedList);
    nodo * aux;

    while(list != NULL)
    {
        aux = desvincularPrimerNodo(&list);
        investedList = agregarAlPrincipio(investedList, aux);
    }

    return investedList;
}

//////////////////////////////////////////////////////////////////////SEVENTH POINT//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////SEVENTH POINT//////////////////////////////////////////////////////////////////

//TODO: Primero debo realizar la libreria de Pilas.

//////////////////////////////////////////////////////////////////////EIGHTH POINT////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////EIGHTH POINT////////////////////////////////////////////////////////////////////////////

nodo * deleteIfLowerToTen(nodo * list)
{
    nodo * aux;

    if(list)
    {
        while(list != NULL && list->dato.edad < 30)
        {
            aux = list;
            list = list->siguiente;
            free(aux);
        }
    }
    return list;
}
